<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flamingo</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif; margin: 0; background: #f8fafc; }
      .wrap { width: 420px; max-height: 620px; overflow: auto; padding: 12px; box-sizing: border-box; }
      .header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 8px; }
      .title { font-weight: 700; color: #0f172a; }
      .meta { font-size: 12px; color: #64748b; }
      .toolbar { display:flex; gap: 6px; flex-wrap: wrap; margin: 8px 0; }
      button { border: 1px solid #cbd5e1; background: #fff; border-radius: 8px; padding: 6px 10px; cursor: pointer; font-size: 12px; }
      button.primary { background: #0ea5e9; border-color: #0ea5e9; color: #fff; }
      .row { display:flex; align-items:center; justify-content:space-between; gap: 10px; margin: 6px 0; }
      .card { background: #fff; border: 1px solid #e2e8f0; border-radius: 10px; padding: 8px; margin-top: 8px; }
      .url { font-size: 12px; color: #0f172a; word-break: break-all; }
      .hint { font-size: 11px; color: #64748b; }
      .muted { color: #94a3b8; }
      .switch { display:flex; gap:6px; align-items:center; font-size:12px; color:#334155; }
      .chip { display:inline-block; font-size:11px; color:#334155; background:#e2e8f0; border-radius:999px; padding:2px 8px; margin-right:4px; }
      .footer { margin-top: 10px; display:flex; justify-content:space-between; align-items:center; }
      .status { font-size: 12px; color: #334155; min-height: 18px; }
      .status.success { color: #047857; }
      .status.error { color: #b91c1c; }
      .toast-wrap {
        position: fixed;
        right: 10px;
        bottom: 10px;
        z-index: 99999;
        display: flex;
        flex-direction: column;
        gap: 6px;
        pointer-events: none;
      }
      .toast {
        max-width: 360px;
        padding: 8px 10px;
        border-radius: 10px;
        border: 1px solid #d1d5db;
        background: #ffffffee;
        font-size: 12px;
        color: #1f2937;
        box-shadow: 0 8px 18px #0f172a22;
      }
      .toast.success { border-color: #34d399; color: #065f46; }
      .toast.error { border-color: #fca5a5; color: #991b1b; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <div>
          <div class="title" data-i18n="popup_title">ðŸ¦© Flamingo</div>
          <div id="summary" class="meta" data-i18n="popup_loading">Loading...</div>
        </div>
        <button id="openOptions" type="button" data-i18n="popup_advanced">Advanced</button>
      </div>

      <div class="toolbar">
        <button id="refresh" type="button" data-i18n="popup_refresh">Refresh</button>
        <button id="clear" type="button" data-i18n="popup_clear">Clear</button>
        <button id="sendSelected" class="primary" type="button" data-i18n="popup_send_selected">Send Selected</button>
        <button id="copySelected" type="button" data-i18n="popup_copy_selected">Copy Selected</button>
      </div>

      <div class="row">
        <label class="switch"><input id="enabled" type="checkbox" /><span data-i18n="popup_bridge">Bridge</span></label>
        <label class="switch"><input id="sniffMediaEnabled" type="checkbox" /><span data-i18n="popup_sniffer">Sniffer</span></label>
        <label class="switch"><input id="autoIntercept" type="checkbox" /><span data-i18n="popup_auto">Auto</span></label>
      </div>
      <div class="row">
        <label class="switch"><input id="currentTabOnly" type="checkbox" /><span data-i18n="popup_current_tab_only">Current tab only</span></label>
      </div>

      <div id="status" class="status"></div>
      <div id="list"></div>

      <div class="footer">
        <span class="hint" data-i18n="popup_footer_hint">Click a video page, then reopen this popup to pick links.</span>
      </div>
    </div>
    <div id="toastWrap" class="toast-wrap"></div>
    <script src="i18n.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
