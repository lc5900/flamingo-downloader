<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flamingo Bridge Options</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif; margin: 20px; }
      .wrap { max-width: 640px; display: grid; gap: 12px; }
      label { display: grid; gap: 6px; font-size: 13px; color: #374151; }
      input[type="text"], textarea { padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; }
      textarea { min-height: 72px; resize: vertical; }
      .row { display: flex; align-items: center; gap: 8px; }
      button { padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 8px; background: white; cursor: pointer; }
      #status { color: #6b7280; font-size: 12px; min-height: 18px; }
      #status.success { color: #047857; }
      #status.error { color: #b91c1c; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h2>Flamingo Downloader Bridge</h2>
      <label class="row">
        <input id="enabled" type="checkbox" />
        <span>Enable Flamingo bridge</span>
      </label>
      <label class="row">
        <input id="useNativeMessaging" type="checkbox" />
        <span>Use native messaging (optional)</span>
      </label>
      <label class="row">
        <input id="autoIntercept" type="checkbox" />
        <span>Auto-intercept browser downloads</span>
      </label>
      <label class="row">
        <input id="sniffMediaEnabled" type="checkbox" />
        <span>Enable media sniffing (experimental)</span>
      </label>
      <label>
        <span>Intercept allowlist (domain per line, empty = all)</span>
        <textarea id="interceptAllowlist" placeholder="example.com&#10;download.example.org"></textarea>
      </label>
      <label>
        <span>Native host name</span>
        <input id="nativeHost" type="text" placeholder="com.lc5900.flamingo.bridge" />
      </label>
      <label>
        <span>Bridge endpoint</span>
        <input id="endpoint" type="text" placeholder="http://127.0.0.1:16789/add" />
      </label>
      <label>
        <span>Bridge token</span>
        <input id="token" type="text" placeholder="optional (leave empty for default extension-origin mode)" />
      </label>
      <div class="row">
        <button id="save" type="button">Save</button>
        <button id="refreshState" type="button">Refresh Activity</button>
      </div>
      <div id="status"></div>
      <div id="activity"></div>

      <hr />
      <h3>Detected Media Candidates</h3>
      <div class="row">
        <button id="refreshMedia" type="button">Refresh Media</button>
        <button id="clearMedia" type="button">Clear Media</button>
      </div>
      <div id="mediaList"></div>
    </div>
    <script src="options.js"></script>
  </body>
</html>
