<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flamingo Bridge Options</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif; margin: 20px; }
      .wrap { max-width: 640px; display: grid; gap: 12px; }
      label { display: grid; gap: 6px; font-size: 13px; color: #374151; }
      input[type="text"], textarea { padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; }
      textarea { min-height: 72px; resize: vertical; }
      .row { display: flex; align-items: center; gap: 8px; }
      button { padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 8px; background: white; cursor: pointer; }
      #status { color: #6b7280; font-size: 12px; min-height: 18px; }
      #status.success { color: #047857; }
      #status.error { color: #b91c1c; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h2 data-i18n="options_title">Flamingo Downloader Bridge</h2>
      <label class="row">
        <input id="enabled" type="checkbox" />
        <span data-i18n="options_enable_bridge">Enable Flamingo bridge</span>
      </label>
      <label class="row">
        <input id="useNativeMessaging" type="checkbox" />
        <span data-i18n="options_native_msg">Use native messaging (optional)</span>
      </label>
      <label class="row">
        <input id="autoIntercept" type="checkbox" />
        <span data-i18n="options_auto_intercept">Auto-intercept browser downloads</span>
      </label>
      <label class="row">
        <input id="sniffMediaEnabled" type="checkbox" />
        <span data-i18n="options_enable_sniffer">Enable media sniffing (experimental)</span>
      </label>
      <label>
        <span data-i18n="options_allowlist">Sniffer allowlist (optional, one rule per line)</span>
        <textarea id="sniffAllowlist" data-i18n-placeholder="options_placeholder_allowlist"></textarea>
      </label>
      <label>
        <span data-i18n="options_blocklist">Sniffer blocklist (optional, one rule per line)</span>
        <textarea id="sniffBlocklist" data-i18n-placeholder="options_placeholder_blocklist"></textarea>
      </label>
      <label>
        <span data-i18n="options_intercept_allowlist">Intercept allowlist (domain per line, empty = all)</span>
        <textarea id="interceptAllowlist" data-i18n-placeholder="options_placeholder_intercept_allowlist"></textarea>
      </label>
      <label>
        <span data-i18n="options_native_host">Native host name</span>
        <input id="nativeHost" type="text" data-i18n-placeholder="options_placeholder_native_host" />
      </label>
      <label>
        <span data-i18n="options_endpoint">Bridge endpoint</span>
        <input id="endpoint" type="text" data-i18n-placeholder="options_placeholder_endpoint" />
      </label>
      <label>
        <span data-i18n="options_token">Bridge token</span>
        <input id="token" type="text" data-i18n-placeholder="options_placeholder_token" />
      </label>
      <div class="row">
        <button id="save" type="button" data-i18n="options_save">Save</button>
        <button id="refreshState" type="button" data-i18n="options_refresh_activity">Refresh Activity</button>
      </div>
      <div id="status"></div>
      <div id="activity"></div>

      <hr />
      <h3 data-i18n="options_detected_media">Detected Media Candidates</h3>
      <div class="row">
        <button id="refreshMedia" type="button" data-i18n="options_refresh_media">Refresh Media</button>
        <button id="clearMedia" type="button" data-i18n="options_clear_media">Clear Media</button>
      </div>
      <div id="mediaList"></div>
    </div>
    <script src="i18n.js"></script>
    <script src="options.js"></script>
  </body>
</html>
